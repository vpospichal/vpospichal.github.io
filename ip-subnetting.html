<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <title>Vizualizace IP pods√≠t√≠</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f4f4f4; }
    input, select { margin: 5px 0; padding: 5px; }
    .bit { display: inline-block; width: 20px; text-align: center; font-family: monospace; padding: 2px; border: 1px solid #ccc; }
    .octet-separator { margin-right: 10px; }
    .network { background: #2196f3; color: white; }
    .subnet { background: #4caf50; color: white; }
    .host { background: #e0e0e0; }
    .subnet-box {
      background: white;
      margin: 10px 0;
      padding: 10px;
      border-left: 5px solid #4caf50;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .ip-binary { font-family: monospace; }
  </style>
</head>
<body>
  <h2>üß† IP Subnetting - vizualizace bit≈Ø a pods√≠t√≠</h2>

  <label>IP adresa (nap≈ô. 192.168.1.0):</label><br/>
  <input type="text" id="ipInput" value="192.168.1.0"/><br/>

<label>V√Ωchoz√≠ maska s√≠tƒõ (supernet): <span id="supernetLabel">16</span></label><br/>
<input type="range" min="8" max="30" value="16" id="supernetSlider"/><br/>

  <label>Prefix (CIDR): <span id="prefixLabel">24</span></label><br/>
  <input type="range" min="16" max="30" value="24" id="prefixSlider"/><br/>


  <div><strong>Bin√°rn√≠ reprezentace IP adresy:</strong></div>
  <div id="bitDisplay" style="margin: 10px 0;"></div>

  <h3>üìã Seznam pods√≠t√≠</h3>
  <div id="subnetList"></div>

  <script>
    const ipInput = document.getElementById("ipInput");
    const slider = document.getElementById("prefixSlider");
    const prefixLabel = document.getElementById("prefixLabel");
    const bitDisplay = document.getElementById("bitDisplay");
    const subnetList = document.getElementById("subnetList");
    const supernetSlider = document.getElementById("supernetSlider");
    const supernetLabel = document.getElementById("supernetLabel");
    const baseIpInt = ipToInt(ip);
    const supernetMask = 0xFFFFFFFF << (32 - supernetPrefix) >>> 0;
    const networkBase = baseIpInt & supernetMask;
    const supernetSize = Math.pow(2, 32 - supernetPrefix);
    const baseIpInt = ipToInt(ip);
    const mask = 0xFFFFFFFF << (32 - prefix) >>> 0;
    const networkBase = baseIpInt & mask;

    function ipToInt(ip) {
      return ip.split('.').reduce((acc, val) => (acc << 8) + parseInt(val), 0);
    }

    function intToIp(int) {
      return [(int >>> 24), (int >>> 16 & 255), (int >>> 8 & 255), (int & 255)].join('.');
    }

    function intToBin(int) {
      return int.toString(2).padStart(32, '0');
    }

    function updateBits() {
      const ip = ipInput.value;
      const prefix = parseInt(slider.value);
      prefixLabel.textContent = prefix;

      const octets = ip.split('.');
      bitDisplay.innerHTML = '';

      if (octets.length !== 4 || octets.some(o => isNaN(o) || o < 0 || o > 255)) {
        bitDisplay.textContent = "‚ùå Neplatn√° IP adresa!";
        subnetList.innerHTML = "";
        return;
      }

      octets.forEach((octet, octetIndex) => {
        const binOctet = parseInt(octet).toString(2).padStart(8, '0');
        for (let bitIndex = 0; bitIndex < 8; bitIndex++) {
          const bit = binOctet[bitIndex];
          const globalBitIndex = octetIndex * 8 + bitIndex;

          const span = document.createElement('span');
          span.className = 'bit';

          if (globalBitIndex < prefix) {
            span.classList.add(globalBitIndex < 24 ? 'network' : 'subnet');
          } else {
            span.classList.add('host');
          }

          span.textContent = bit;
          bitDisplay.appendChild(span);
        }

        if (octetIndex < 3) {
          const spacer = document.createElement('span');
          spacer.className = 'octet-separator';
          bitDisplay.appendChild(spacer);
        }
      });

      const supernetPrefix = parseInt(supernetSlider.value);
      supernetLabel.textContent = supernetPrefix;

      // ochrana ‚Äì nelze m√≠t v√Ωsledn√Ω prefix men≈°√≠ ne≈æ supernet
      if (prefix < supernetPrefix) {
        bitDisplay.innerHTML = "‚ùå V√Ωsledn√Ω prefix nem≈Ø≈æe b√Ωt men≈°√≠ ne≈æ v√Ωchoz√≠ maska!";
        subnetList.innerHTML = "";
        return;
      }
    }

    function generateSubnets(networkBase, prefix, supernetSize) {
      subnetList.innerHTML = '';

      const subnetSize = Math.pow(2, 32 - prefix);
      const subnetCount = supernetSize / subnetSize;

      for (let i = 0; i < subnetCount; i++) {
        const subnetBase = baseIpInt + i * subnetSize;
        const broadcast = subnetBase + subnetSize - 1;
        const firstHost = subnetSize > 2 ? subnetBase + 1 : subnetBase;
        const lastHost = subnetSize > 2 ? broadcast - 1 : broadcast;

        const div = document.createElement('div');
        div.className = 'subnet-box';

        const binIp = intToIp(subnetBase)
          .split('.')
          .map(o => parseInt(o).toString(2).padStart(8, '0'))
          .join('.');

        div.innerHTML = `
          <strong>Pods√≠≈• ${i + 1}:</strong><br/>
          Adresa pods√≠tƒõ: <strong>${intToIp(subnetBase)}</strong> /${prefix}<br/>
          Bin√°rnƒõ: <span class="ip-binary">${binIp}</span><br/>
          Broadcast: ${intToIp(broadcast)}<br/>
          Rozsah host≈Ø: ${intToIp(firstHost)} - ${intToIp(lastHost)}<br/>
          Velikost: ${subnetSize - 2} host≈Ø
        `;
        subnetList.appendChild(div);
      }
    }

    generateSubnets(networkBase, prefix, supernetSize);
    ipInput.addEventListener("input", updateBits);
    slider.addEventListener("input", updateBits);
    updateBits();
  </script>
</body>
</html>
